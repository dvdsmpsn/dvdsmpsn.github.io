<html>
  <head>
    <!-- https://davidsimpson.me/labs/pii-viewer/mailchimp-example.html -->

    <style>
      body {
        font-family: sans-serif;
        font-size: 16px;
        text-align: center;
      }
      #mc {
        margin: 30px;
        font-size: 200%;
      }
    </style>
  </head>
  <body>
    <p>Hello world. Is this from Mailchimp?</p>
    <p id="mc">Your Mailchimp Email UID is <strong id="uid">not set</strong></p>
    <p>
      <a
        href="https://github.com/dvdsmpsn/dvdsmpsn.github.io/edit/master/labs/pii-viewer/mailchimp-example.html"
        >Edit this file</a
      >
    </p>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-2FH8CFVGBT"
    ></script>
    <script>
      //
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-2FH8CFVGBT"); // ********** My tag - use your own here

      // Get a request parameter
      const getParameter = (key, fallback = null) =>
        new URLSearchParams(location.search).get(key) || fallback;

      const mcid = getParameter("mcid");

      if (mcid) {
        // it's from a mailchimp email campaign

        // display it on the page ;)
        const uidNode = document.querySelector("#uid");
        uidNode.innerHTML = mcid;

        // send it to Google Analytics
        // @see: https://support.google.com/analytics/answer/10075209
        gtag("event", "mailchimp_mailshot", {
          mcid: mcid,
        });
      }
    </script>
  </body>
</html>
